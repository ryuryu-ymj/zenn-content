---
title: "Typst ã®æ—¥æœ¬èªã‚¹ãƒšãƒ¼ã‚¹å•é¡Œã‚’è§£æ±ºã™ã‚‹"
emoji: "ğŸ“ƒ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
  - "çµ„ç‰ˆ"
  - "typst"
published: true
published_at: 2025-11-30 23:55
---

:::message
ã“ã®è¨˜äº‹ã¯ [Typst Advent Calendar 2025](https://qiita.com/advent-calendar/2025/typst) ã®ï¼‘æ—¥ç›®ã®è¨˜äº‹ã§ã™ï¼
æ˜æ—¥ã¯[@Blank71](https://qiita.com/Blank71)ã•ã‚“ã®è¨˜äº‹ãŒå…¬é–‹ã•ã‚Œã‚‹äºˆå®šã§ã™ï¼
:::


æœ¬è¨˜äº‹ã§ã¯ï¼ŒTypst ã§æ—¥æœ¬èªã‚’æ‰±ã†ã¨ãã®æ–‡å­—é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’æ”¹è‰¯ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é–‹ç™ºã—ãŸã®ã§ï¼Œä½¿ã„æ–¹ã¨ä»•çµ„ã¿ã‚’ç°¡å˜ã«è§£èª¬ã—ãŸã„ã¨æ€ã„ã¾ã™ï¼


# å¤‰æ›´å±¥æ­´
* 2025/12/17: cjk-spacer v0.2.0 ã«åˆã‚ã›ã¦ï¼Œæƒ…å ±ã‚’ä¸€éƒ¨ï¼Œæ›´æ–°ã—ã¾ã—ãŸï¼


# Typst æ—¥æœ¬èªã‚¹ãƒšãƒ¼ã‚¹å•é¡Œ
Typst ã§æ—¥æœ¬èªã‚’æ‰±ã†ã¨ãã«å•é¡Œã¨ãªã‚‹ã®ãŒæ–‡å­—é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ï¼ˆç©ºãï¼‰ã§ã™ï¼Typst v0.14.0 æ™‚ç‚¹ã§å¯¾å¿œã—ã¦ã„ãªã„å•é¡Œã¨ã—ã¦ï¼Œå…·ä½“çš„ã«ä»¥ä¸‹ã®ï¼’ç‚¹ãŒæ°—ã«ãªã‚‹ã§ã—ã‚‡ã†ï¼

- å’Œæ–‡ã®é€”ä¸­ã§æ”¹è¡Œã™ã‚‹ã¨é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã£ã¦ã—ã¾ã†ï¼

  ```typst
  å’Œæ–‡ã®é€”ä¸­ã§
  æ”¹è¡Œã™ã‚‹ã¨ï¼Œ
  é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‹

  // è¦–èªã®ãŸã‚ã‚¹ãƒšãƒ¼ã‚¹ã«è‰²ã‚’ã¤ã‘ã‚‹
  #show " ": it => highlight(it, fill: red.transparentize(40%))

  å’Œæ–‡ã®é€”ä¸­ã§
  æ”¹è¡Œã™ã‚‹ã¨ï¼Œ
  é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‹
  ```

  ![å’Œæ–‡ã®é€”ä¸­ã§æ”¹è¡Œã—ãŸå ´åˆã«é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‹ä¾‹ï¼](/images/typst_cjk_space/example1.png)

- å’Œæ–‡ã¨æ•°å¼ã®é–“ã«è‡ªå‹•ã§ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‰ãªã„ï¼
  ä¸‹å›³ã®ã‚ˆã†ã«ï¼Œå’Œæ–‡ã¨æ¬§æ–‡ã®é–“ã«ã¯æ˜ç¤ºçš„ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’æ›¸ã‹ãªãã¦ã‚‚è‡ªå‹•ã§ã‚¹ãƒšãƒ¼ã‚¹ãŒæŒ¿å…¥ã•ã‚Œã‚‹ã®ã«å¯¾ã—ï¼Œå’Œæ–‡ã¨æ•°å¼ã®é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ã¯æ˜ç¤ºçš„ã«æ›¸ãå¿…è¦ãŒã‚ã‚‹ï¼

  ```typst
  è¤‡ç´ è§£æã®Eulerã®å…¬å¼ã‚ˆã‚Šï¼Œä»»æ„ã®è¤‡ç´ æ•°$z$ã«å¯¾ã—ã¦...

  // æ˜ç¤ºçš„ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¨˜è¿°
  è¤‡ç´ è§£æã® Euler ã®å…¬å¼ã‚ˆã‚Šï¼Œä»»æ„ã®è¤‡ç´ æ•° $z$ ã«å¯¾ã—ã¦...
  ```

  ![å’Œæ–‡ã¨æ•°å¼ã®é–“ã«è‡ªå‹•ã§ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‰ãªã„ä¾‹ï¼](/images/typst_cjk_space/example2.png)


# cjk-spacer
ä¸Šè¨˜ã®ï¼’ç‚¹ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦é–‹ç™ºã—ãŸã®ãŒ cjk-spacer ã§ã™ï¼

https://github.com/ryuryu-ymj/cjk-spacer


# ä½¿ã„æ–¹
ã¾ãšå¤§å‰æã¨ã—ã¦ Typst ã§æ—¥æœ¬èªã‚’æ‰±ã†ãŸã‚ã«ãƒ•ã‚©ãƒ³ãƒˆã‚’æŒ‡å®šã—ã¦ãŠãã¾ã™ï¼ä»¥ä¸‹ã®ä¾‹ã§ã¯ Noto Serif JP ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ï¼ ~~ãªãŠï¼Œ`text` ã® `lang` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ `ja`ï¼ˆæ—¥æœ¬èªï¼‰ã«è¨­å®šã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ï¼ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã§è¨­å®šã•ã‚Œã¾ã™ï¼ï¼‰~~ ï¼ˆ**è¿½è¨˜**ï¼šcjk-spacer v0.2.0ä»¥é™ï¼Œ`text` ã® `lang` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å´ã§ã¯è¨­å®šã•ã‚Œã¾ã›ã‚“ã®ã§ï¼Œè‡ªèº«ã§è¨­å®šã—ã¦ãã ã•ã„ï¼ï¼‰

```typst
#set text(lang: "ja", font: "Noto Serif JP")
```

ä½¿ã„æ–¹ã¯æ–‡æ›¸ã®æœ€åˆã«ä»¥ä¸‹ã®è¡Œã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ã™ï¼

```typst
#import "@preview/cjk-spacer:0.2.0": cjk-spacer
#show: cjk-spacer
```

ã“ã‚Œä»¥é™ã¯ï¼Œå’Œæ–‡ã‚’é€”ä¸­ã§æ”¹è¡Œã—ã¦ã‚‚ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚Šã¾ã›ã‚“ã—ï¼Œæ•°å¼ã¨å’Œæ–‡ã®é–“ã«ã¯è‡ªå‹•ã§ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚Šã¾ã™ï¼

```typst
å’Œæ–‡ã®é€”ä¸­ã§
æ”¹è¡Œã—ã¦ã‚‚ï¼Œ
é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‰ãªã„

æ•°å¼$x+y$ã¨å’Œæ–‡ã®é–“ã«ã¯è‡ªå‹•ã§ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‹
```

![cjk-spacer ã«ã‚ˆã‚‹æ—¥æœ¬èªæ–‡æ›¸ã®å‡ºåŠ›çµæœã®ä¾‹ï¼](/images/typst_cjk_space/example3.png)

**è¿½è¨˜**: cjk-spacer v0.2.0 ã§ã€ŒåŠè§’ç´„ç‰©ã¨å’Œæ–‡ã®é–“ã«è‡ªå‹•ã§ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‹æ©Ÿèƒ½ã€ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸï¼


# ä»•çµ„ã¿
ä»¥é™ï¼Œå°‘ã€…ãƒãƒ‹ã‚¢ãƒƒã‚¯ãªè©±ã«ã¯ãªã‚Šã¾ã™ãŒï¼Œï¼ˆ**è¿½è¨˜**ï¼šcjk-spacer v0.1.0 æ™‚ç‚¹ã®ï¼‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…éƒ¨ã®ä»•çµ„ã¿ã‚’ç°¡å˜ã«èª¬æ˜ã—ã¾ã™ï¼

## å’Œæ–‡ã¨æ•°å¼ã®é–“ã«è‡ªå‹•ã§ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¥ã‚Œã‚‹
ã¾ãšï¼Œå’Œæ–‡ã¨æ•°å¼ã®é–“ã®ã‚¹ãƒšãƒ¼ã‚¹å•é¡Œã«é–¢ã—ã¦ã§ã™ãŒï¼Œã“ã¡ã‚‰ã®è¨˜äº‹ã§è©³ç´°ãªè§£èª¬ãŒãªã•ã‚Œã¦ãŠã‚Šï¼Œå¤§å¤‰å‚è€ƒã«ãªã‚Šã¾ã—ãŸï¼š

https://qiita.com/zr_tex8r/items/a9d82669881d8442b574

ã“ã®è¨˜äº‹ã§æç¤ºã•ã‚Œã¦ã„ã‚‹è§£æ±ºç­–ã¯å¤–éƒ¨ãƒ•ã‚©ãƒ³ãƒˆã‚’æ´»ç”¨ã—ãŸã‚‚ã®ã§ã™ãŒï¼Œä»Šå›ã¯å¤–éƒ¨ãƒ•ã‚©ãƒ³ãƒˆã«ä¾å­˜ã—ãªã„æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ï¼ã‚¢ã‚¤ãƒ‡ã‚¢ã¨ã—ã¦ã¯è¨˜äº‹ã¨åŒã˜ãï¼Œã€Œã‚¼ãƒ­å¹…ã®è¦‹ãˆãªã„æ¬§æ–‡æ–‡å­—ã€ã‚’æ•°å¼ã®å‰å¾Œã«æŒ¿å…¥ã™ã‚‹ã¨ã„ã†æ–¹æ³•ã‚’å–ã‚Šã¾ã™ï¼ã•ã™ã‚Œã°ï¼Œæ•°å¼ã¨å’Œæ–‡ã®é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ã¯æ¬§æ–‡ã¨å’Œæ–‡ã®é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ã¨åŒæ§˜ã«ï¼ŒTypst ãŒã‚ˆã—ãªã«ã‚„ã£ã¦ãã‚Œã‚‹ã¯ãšã§ã™ï¼

ã¾ãšã€Œè¦‹ãˆãªã„æ–‡å­—ã€ã‚’ä½œã‚‹æ–¹æ³•ã§ã™ãŒï¼ŒTypst ã«ã¯ `hide` ã¨ã„ã† content ã‚’è¦‹ãˆãªãã™ã‚‹é–¢æ•°ãŒã‚ã‚Šã¾ã™ï¼

```typst
helloä¸–ç•Œ \
#hide[hello]ä¸–ç•Œ
```

![hideé–¢æ•°ã«ã‚ˆã£ã¦æ–‡å­—ãŒè¦‹ãˆãªããªã£ãŸå‡ºåŠ›çµæœï¼](/images/typst_cjk_space/example4.png)

ç‰¹å¾´ã¨ã—ã¦ `hide` ã¯ä»–ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«å½±éŸ¿ã‚’ä¸ãˆãªã„ã®ã§ï¼Œå’Œæ–‡ã¨æ¬§æ–‡ã®é–“ã«è‡ªå‹•ã§ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‹æ©Ÿèƒ½ `cjk-latin-spacing` ã‚‚é©ç”¨ã•ã‚Œã¾ã™ï¼

ã“ã®ã¾ã¾ã§ã¯å¹…ã‚’æŒã£ã¦ã—ã¾ã†ã®ã§ï¼Œã€Œã‚¼ãƒ­å¹…ã€ã«ã™ã‚‹ãŸã‚ã«ï¼ŒåŒã˜å¹…ã®ãƒã‚¤ãƒŠã‚¹ã®æ°´å¹³ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¿½åŠ ã—ã¾ã™ï¼content ã®ã‚µã‚¤ã‚ºã‚’æ¸¬ã‚‹ã«ã¯ï¼Œ`context` ã®ä¸­ã§ `measure` é–¢æ•°ã‚’ä½¿ã„ã¾ã™ï¼

```typst
#{
  let a = [a]                 // é©å½“ãªæ¬§æ–‡æ–‡å­—
  context {
    let w = measure(a).width  // [a] ã®æ¨ªå¹…ã‚’æ¸¬å®š
    hide(a)                   // è¦‹ãˆãªã„ [a]
    h(-w, weak: false)        // [a] ã®æ¨ªå¹…ã‚’æ‰“ã¡æ¶ˆã™
  }
}
```

ã“ã‚Œã§ã€Œã‚¼ãƒ­å¹…ã®è¦‹ãˆãªã„æ¬§æ–‡æ–‡å­—ã€ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸï¼ã‚ã¨ã¯ã“ã‚Œã‚’æ•°å¼ã®å‰å¾Œã«æŒ¿å…¥ã™ã‚‹ show rule ã‚’å®šç¾©ã—ã¦ã‚ã’ã‚Œã°ï¼Œæ•°å¼ã‚’æ¬§æ–‡æ‰±ã„ã«ã§ãã¾ã™ï¼å¿µã®ç‚ºï¼Œãƒã‚¤ãƒŠã‚¹ã®ã‚¹ãƒšãƒ¼ã‚¹ã®å‰å¾Œã«æ”¹è¡Œã‚’é˜²ãå˜èªçµåˆå­ã‚’ã¯ã•ã‚“ã§ãŠãã¾ã™ï¼

```typst:æ•°å¼ã« cjk-latin-spacing ã‚’é©ç”¨ã•ã›ã‚‹ show rule
#show math.equation.where(block: false): it => {
  let a = [a]                 // é©å½“ãªæ¬§æ–‡æ–‡å­—      
  context {                                          
    let w = measure(a).width  // [a] ã®æ¨ªå¹…ã‚’æ¸¬å®š    
    hide(a)                   // è¦‹ãˆãªã„ [a]        
    sym.wj                    // æ”¹è¡Œã‚’é˜²ãå˜èªçµåˆå­
    h(-w, weak: false)        // [a] ã®æ¨ªå¹…ã‚’æ‰“ã¡æ¶ˆã™
    sym.wj                    // æ”¹è¡Œã‚’é˜²ãå˜èªçµåˆå­
    it                        // æ•°å¼æœ¬ä½“
    sym.wj                    // æ”¹è¡Œã‚’é˜²ãå˜èªçµåˆå­
    h(-w, weak: false)        // [a] ã®æ¨ªå¹…ã‚’æ‰“ã¡æ¶ˆã™
    sym.wj                    // æ”¹è¡Œã‚’é˜²ãå˜èªçµåˆå­
    hide(a)                   // è¦‹ãˆãªã„ [a]        
  }
}
```


## å’Œæ–‡ã‚’é€”ä¸­ã§æ”¹è¡Œã—ã¦ã‚‚é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¥ã‚Œãªã„
ç¶šã„ã¦ï¼Œå’Œæ–‡ã®é€”ä¸­æ”¹è¡Œã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¥ã‚Œãªã„æ–¹æ³•ã‚’è§£èª¬ã—ã¾ã™ï¼

ãã‚‚ãã‚‚ï¼Œæ”¹è¡Œæ™‚ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã£ã¦ã—ã¾ã†åŸå› ã§ã™ãŒï¼Œé€”ä¸­æ”¹è¡Œã§é–“ã« `[ ]`ï¼ˆelement function ã®åå‰ã¯ `space`ï¼‰ã¨ã„ã† content ãŒæŒ¿å…¥ã•ã‚Œã‚‹ã‹ã‚‰ã§ã™ï¼

```typst
// ãƒ‡ãƒãƒƒã‚°ãƒ—ãƒªãƒ³ãƒˆé–¢æ•°
#let dbg(body) = {
  raw(repr(body), lang: "typc")
}

#let c = [é€”ä¸­ã§
  æ”¹è¡Œ]

#dbg(c) \
#dbg(c.children.at(1).func()) \
#dbg(c == [é€”ä¸­ã§] + [ ] + [æ”¹è¡Œ])
```

![æ”¹è¡Œæ™‚ã«spaceãŒæŒ¿å…¥ã•ã‚Œã‚‹å‡ºåŠ›çµæœï¼](/images/typst_cjk_space/example5.png)

ã“ã® `space` ã‚’å’Œæ–‡ã®å‰å¾Œã§å–ã‚Šé™¤ãã“ã¨ã§ï¼Œã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‹ã®ã‚’é˜²ããƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ cjk-unbreak ãŒã‚ã‚Šã¾ã™ï¼

https://typst.app/universe/package/cjk-unbreak/

ã—ã‹ã—ãªãŒã‚‰ï¼ŒTypst ã®æ–‡æ›¸æ§‹æ–‡æœ¨ã‚’ç¶²ç¾…çš„ã«æ¢æŸ»ã—ã¦ `space` ã‚’å–ã‚Šé™¤ãï¼Œæ§‹æ–‡æœ¨ã‚’å†æ§‹ç¯‰ã™ã‚‹ã¨ã„ã†æ–¹æ³•ãªã®ã§ï¼Œå®Ÿè£…ãŒè¤‡é›‘ã§ã™ï¼å®Ÿéš›ï¼Œ`terms` ã‚„ `place` ãªã©æœªå¯¾å¿œãªé–¢æ•°ã‚‚ã‚ã‚Šï¼Œãƒã‚°ã‚’å®Œå…¨ã«é™¤å»ã™ã‚‹ã«ã¯ Typst ã®æ§‹æ–‡æœ¨ã®ä»•æ§˜ã‚’å®Œç’§ã«æŠŠæ¡ã™ã‚‹ã—ã‹ãªãå›°é›£ã§ã™ï¼

ä»Šå›ã¯ä»£ã‚ã‚Šã«ï¼Œ`text` ã« show rule ã‚’å®šç¾©ã™ã‚‹æ–¹æ³•ã‚’å–ã‚Šã¾ã™ï¼å®Ÿã¯å…ˆã»ã©ã® `space` ã¯ `h(0em, weak: true)` ã§æ‰“ã¡æ¶ˆã™ã“ã¨ãŒã§ãã¾ã™ï¼

```typst
// ã‚¹ãƒšãƒ¼ã‚¹ã‚’å¯è¦–åŒ–
#show " ": it => highlight(it, fill: red.transparentize(40%))

#{ [é€”ä¸­ã§] + [ ] + [æ”¹è¡Œ] } \
#{ [é€”ä¸­ã§] + [ ] + h(0em, weak: true) + [æ”¹è¡Œ] } \
#{ [é€”ä¸­ã§] + h(0em, weak: true) + [ ] + [æ”¹è¡Œ] }
```

![space ã‚’æ‰“ã¡æ¶ˆã™å‡ºåŠ›çµæœï¼](/images/typst_cjk_space/example6.png)

ãã—ã¦é‹ã®ã„ã„ã“ã¨ã«ï¼Œ`cjk-latin-spacing` ã¯ `h(0em, weak: true)` ã‚ˆã‚Šã‚‚å„ªå…ˆã•ã‚Œã¾ã™ï¼

```typst
#show " ": it => highlight(it, fill: red.transparentize(40%))

#{ [hello] + [ ] + [ä¸–ç•Œ] } \
#{ [hello] + [ ] + h(0em, weak: true) + [ä¸–ç•Œ] } \
#{ [hello] + h(0em, weak: true) + [ ] + [ä¸–ç•Œ] }
```

![ã‚¼ãƒ­å¹…æ°´å¹³ã‚¹ãƒšãƒ¼ã‚¹ã‚ˆã‚Šã‚‚ cjk-latin-spacing ã®æ–¹ãŒå„ªå…ˆã•ã‚Œã‚‹å‡ºåŠ›çµæœï¼](/images/typst_cjk_space/example7.png)

ãªã®ã§ï¼Œ`text` ã®å‰å¾ŒãŒå’Œæ–‡ (CJK) æ–‡å­—ã§çµ‚ã‚ã‚‹å ´åˆã«ï¼Œå‰å¾Œã«
`h(0em, weak: true)` ã‚’æŒ¿å…¥ã™ã‚‹ã‚ˆã†ãª show rule ã‚’å®šç¾©ã—ã¦ã‚ã’ã‚Œã°ã‚ˆã•ãã†ã§ã™ï¼`text` ã®æœ€åˆã¨æœ€å¾Œã®æ–‡å­—ã‚’å–å¾—ã™ã‚‹ã«ã¯ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã«å¯¾å¿œã—ãŸ `str` ã® `clusters` ã‚’ä½¿ã†ã¨ã‚ˆã„ã§ã—ã‚‡ã†ï¼å’Œæ–‡æ–‡å­—ã®åˆ¤å®šã«ã¯æ­£è¦è¡¨ç¾ã‚’ä½¿ã„ã¾ã™ï¼

```typst:å’Œæ–‡ã®é€”ä¸­æ”¹è¡Œã§ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¥ã‚Œãªã„ show rule
#let cjk-regex = ... // å’Œæ–‡æ–‡å­—ã«ãƒãƒƒãƒã™ã‚‹ä½•ã‹ã—ã‚‰ã®æ­£è¦è¡¨ç¾

#show text: it => {
  let clusters = it.text.clusters()
  if clusters.len() == 0 {
    return it
  }

  let pre = if clusters.first().match(cjk-regex) != none {
    h(0em, weak: true)
  }
  let post = if clusters.last().match(cjk-regex) != none {
    h(0em, weak: true)
  }
  return pre + it + post
}
```

å’Œæ–‡æ–‡å­—ã‚’åˆ¤å®šã™ã‚‹æ­£è¦è¡¨ç¾ã§ã™ãŒï¼Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã¯ã€Œã²ã‚‰ãŒãªãƒ»ã‚«ã‚¿ã‚«ãƒŠãƒ»æ¼¢å­— etc. ï¼‹ CJKæ–‡å­—ã«ç›¸å½“ã—ãã†ãªæ–‡å­—ãƒ–ãƒ­ãƒƒã‚¯ã€ã‚’ã™ã¹ã¦å…¥ã‚ŒãŸæ­£è¦è¡¨ç¾ã‚’ä½¿ã£ã¦ã„ã¾ã™ï¼

```typst
#let cjk-regex = regex(
  "["
    + "\p{scx:Hira}\p{scx:Kana}\p{scx:Han}\p{scx:Hang}\p{scx:Bopo}"
    + "\u3000-\u303F" // CJK Symbols and Punctuation
    + "\u3190-\u319F" // Kanbun
    + "\u31C0-\u31EF" // CJK Strokes
    + "\u3200-\u32FF" // Enclosed CJK Letters and Months
    + "\u3300-\u33FF" // CJK Compatibility
    + "\uFE10-\uFE1F" // Vertical Forms
    + "\uFE30-\uFE4F" // CJK Compatibility Forms
    + "\uFF00-\uFFEF" // Halfwidth and Fullwidth Forms
    + "]",
)
```


# æœ€å¾Œã«
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«é–¢ã—ã¦ï¼Œç–‘å•ç‚¹ãƒ»æ„è¦‹ç­‰ã”ã•ã„ã¾ã—ãŸã‚‰ï¼Œã‚³ãƒ¡ãƒ³ãƒˆã‹ Github ã« issue ã‚’ç«‹ã¦ã¦ã„ãŸã ã‘ã‚Œã°ï¼Œå¤§å¤‰åŠ©ã‹ã‚Šã¾ã™ï¼

æœ€å¾Œã¾ã§èª­ã‚“ã§ãã ã•ã‚Šï¼Œã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼
